<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Curricular - Medicina</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4ff; padding: 10px; }
    h1 { text-align: center; color: #6a0dad; }
    .grid { display: grid; grid-template-columns: repeat(14, 1fr); gap: 10px; overflow-x: auto; }
    .ciclo { background: #c8a2c8; padding: 5px; border-radius: 8px; }
    .ciclo h2 { font-size: 16px; text-align: center; color: white; }
    .curso {
      margin: 4px 0;
      padding: 8px;
      border-radius: 5px;
      background: #add8e6;
      text-align: center;
      cursor: pointer;
      font-size: 13px;
    }
    .cursado {
      background: #9370db;
      text-decoration: line-through;
      color: white;
    }
    .bloqueado {
      background: #d3d3d3;
      color: #888;
      pointer-events: none;
    }
  </style>
</head>
<body>
<h1>Malla Curricular - Medicina Humana</h1>
<div class="grid" id="contenedor"></div>

<script>
const cursos = [
  { ciclo: 1, nombre: "COMPLEMENTOS DE MATEMÁTICA", codigo: "MATH1001", requisitos: [] },
  { ciclo: 1, nombre: "FUNDAMENTOS BIOLÓGICOS 1", codigo: "BIOL1109", requisitos: [] },
  { ciclo: 1, nombre: "MORFOLOGÍA Y FISIOLOGÍA CLÍNICA", codigo: "MORF1110", requisitos: [] },
  { ciclo: 1, nombre: "COMUNICACIÓN 1", codigo: "LENG1001", requisitos: [] },
  { ciclo: 1, nombre: "DESARROLLO DEL TALENTO", codigo: "RRHH1101", requisitos: [] },
  { ciclo: 2, nombre: "INTRODUCCIÓN A LA MEDICINA", codigo: "HEAL1110", requisitos: ["BIOL1109", "MORF1110", "LENG1001"] },
  { ciclo: 2, nombre: "HABILIDADES COMUNICATIVAS EN SALUD", codigo: "HUMA1119", requisitos: ["LENG1001"] },
  { ciclo: 2, nombre: "GESTIÓN DE INFORMACIÓN CIENTÍFICA", codigo: "INVE1102", requisitos: [] },
  { ciclo: 2, nombre: "FUNDAMENTOS BIOLÓGICOS 2", codigo: "BIOL1110", requisitos: ["MATH1001", "BIOL1109"] },
  { ciclo: 2, nombre: "SISTEMA TEGUMENTARIO", codigo: "FSLG1102", requisitos: ["BIOL1109", "MORF1110"] },
  { ciclo: 2, nombre: "SISTEMA NERVIOSO", codigo: "FSLG1101", requisitos: ["BIOL1109", "MORF1110"] },
  { ciclo: 2, nombre: "PRÁCTICA MÉDICA INTEGRADA 1", codigo: "HEAL1111", requisitos: ["BIOL1109", "MORF1110"] },
];

let estado = JSON.parse(localStorage.getItem('estadoCursos')) || {};

function puedeCursar(curso) {
  return curso.requisitos.every(req => estado[req]);
}

function render() {
  const contenedor = document.getElementById('contenedor');
  contenedor.innerHTML = "";
  for (let i = 1; i <= 14; i++) {
    const columna = document.createElement('div');
    columna.className = 'ciclo';
    const titulo = document.createElement('h2');
    titulo.textContent = 'Ciclo ' + i;
    columna.appendChild(titulo);

    cursos.filter(c => c.ciclo === i).forEach(curso => {
      const div = document.createElement('div');
      div.className = 'curso';
      div.textContent = curso.nombre;
      if (estado[curso.codigo]) div.classList.add('cursado');
      else if (!puedeCursar(curso)) div.classList.add('bloqueado');
      div.onclick = () => {
        estado[curso.codigo] = !estado[curso.codigo];
        localStorage.setItem('estadoCursos', JSON.stringify(estado));
        render();
      };
      columna.appendChild(div);
    });

    contenedor.appendChild(columna);
  }
}
render();
</script>
</body>
</html>